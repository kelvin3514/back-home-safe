{"version":3,"sources":["assets/back.svg","components/Header.tsx","utils/mediaStream.ts","components/MediaStream.tsx","../node_modules/@material-ui/core/esm/ListItem/ListItem.js","../node_modules/@material-ui/core/esm/MenuItem/MenuItem.js","containers/CameraSetting/index.tsx"],"names":["Header","name","backPath","Wrapper","to","BackButton","src","back","styled","img","div","mediaStreamErrorType","getMediaStream","cameraId","a","navigator","mediaDevices","getUserMedia","video","deviceId","facingMode","audio","console","log","Error","CAMERA_ACTIVATE_ERROR","GET_USER_MEDIA_NOT_FOUND","MediaStream","onFrame","suppressError","t","useTranslation","preferredCameraId","useCamera","useState","showUnSupportErrorModal","setShowUnSupportErrorModal","showCameraActivationErrorModal","setShowCameraActivationErrorModal","videoRef","useRef","canvasRef","useRafLoop","canvasElement","current","videoElement","readyState","HAVE_ENOUGH_DATA","canvas","getContext","height","videoHeight","width","videoWidth","drawImage","imageData","getImageData","loopStop","loopStart","initMediaStream","useCallback","undefined","stream","srcObject","play","message","useEffect","getTracks","forEach","track","stop","Video","ref","playsInline","Canvas","Dialog","open","keepMounted","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","isIOS","DialogActions","Button","color","useEnhancedEffect","window","React","ListItem","props","_props$alignItems","alignItems","_props$autoFocus","autoFocus","_props$button","button","childrenProp","children","classes","className","componentProp","component","_props$ContainerCompo","ContainerComponent","_props$ContainerProps","ContainerProps","ContainerClassName","_objectWithoutProperties","_props$dense","dense","_props$disabled","disabled","_props$disableGutters","disableGutters","_props$divider","divider","focusVisibleClassName","_props$selected","selected","other","context","ListContext","childContext","listItemRef","focus","toArray","hasSecondaryAction","length","isMuiElement","handleOwnRef","instance","ReactDOM","handleRef","useForkRef","componentProps","_extends","clsx","root","gutters","alignItemsFlexStart","secondaryAction","Component","focusVisible","ButtonBase","Provider","value","container","pop","withStyles","theme","display","justifyContent","position","textDecoration","boxSizing","textAlign","paddingTop","paddingBottom","backgroundColor","palette","action","opacity","borderBottom","concat","backgroundClip","paddingLeft","paddingRight","transition","transitions","create","duration","shortest","hover","MenuItem","tabIndex","_props$component","ListItemClasses","_props$role","role","tabIndexProp","typography","body1","_defineProperty","minHeight","overflow","whiteSpace","breakpoints","up","body2","PageWrapper","CameraSetting","setPreferredCameraId","cameraList","FormWrapper","StyledFormControl","InputLabel","Select","labelId","onChange","e","target","map","label","isNil","isEmpty","FormHelperText","VideoContainer","FormControl"],"mappings":"gMAAe,MAA0B,iC,OCU5BA,EAAS,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,KAAMC,EAAsB,EAAtBA,SAC7B,OACE,eAACC,EAAD,WACGD,GACC,cAAC,IAAD,CAAME,GAAIF,EAAV,SACE,cAACG,EAAD,CAAYC,IAAKC,MAGpBN,MAKDI,EAAaG,IAAOC,IAAV,iGAOVN,EAAUK,IAAOE,IAAV,8L,uEC9BDC,E,mKAAAA,K,oDAAAA,E,+CAAAA,M,KAKL,I,IAAMC,EAAc,uCAAG,WAAOC,GAAP,SAAAC,EAAA,2DACxB,iBAAkBC,WADM,mDAIjBA,UAAUC,aAAaC,aAAa,CACzCC,MAAOL,EACH,CAAEM,SAAUN,GACZ,CAAEO,WAAY,eAClBC,OAAO,KARe,sCAWxBC,QAAQC,IAAR,MACM,IAAIC,MAAMb,EAAqBc,uBAZb,qCAepB,IAAID,MAAMb,EAAqBe,0BAfX,yDAAH,sD,OCkBdC,EAAc,SAAC,GAA+C,IAA7CC,EAA4C,EAA5CA,QAA4C,IAAnCC,qBAAmC,SAChEC,EAAMC,YAAe,aAArBD,EACAE,EAAsBC,cAAtBD,kBAFgE,EAGVE,oBAAS,GAHC,mBAGjEC,EAHiE,KAGxCC,EAHwC,OAOpEF,oBAAS,GAP2D,mBAKtEG,EALsE,KAMtEC,EANsE,KASlEC,EAAWC,iBAAyB,MACpCC,EAAYD,iBAA0B,MAV4B,EAY1CE,aAAW,WACvC,IAAMC,EAAgBF,EAAUG,QAC1BC,EAAeN,EAASK,QAE9B,GACED,GACAE,GACAA,EAAaC,aAAeD,EAAaE,iBACzC,CACA,IAAMC,EAASL,EAAcM,WAAW,MACxC,IAAKD,EAAQ,OAEbL,EAAcO,OAASL,EAAaM,YACpCR,EAAcS,MAAQP,EAAaQ,WACnCL,EAAOM,UACLT,EACA,EACA,EACAF,EAAcS,MACdT,EAAcO,QAGhB,IAAMK,EAAYP,EAAOQ,aACvB,EACA,EACAb,EAAcS,MACdT,EAAcO,QAGhBtB,GAAWA,EAAQ2B,OAEpB,GA3CqE,mBAYjEE,EAZiE,KAYvDC,EAZuD,KA6ClEC,EAAkBC,sBAAW,sBAAC,8BAAA9C,EAAA,yDAC5B+B,EAAeN,EAASK,QADI,wDAIlCtB,QAAQC,IAAI,oBAAqBS,GAJC,kBAOXpB,EACG,SAAtBoB,OAA+B6B,EAAY7B,GARb,UAO1B8B,EAP0B,0DAYhCjB,EAAakB,UAAYD,EACzBjB,EAAamB,OACbN,IAdgC,uDAgBxB,KAAEO,QAhBsB,cAiBzBtD,EAAqBe,yBAjBI,UAoBzBf,EAAqBc,sBApBI,2BAkB5BW,GAA2B,GAlBC,iCAqBxBP,EArBwB,0DAsB5BS,GAAkC,GAtBN,6BAyB5BhB,QAAQC,IAAR,MAzB4B,0DA4BjC,CAACmC,EAAW1B,EAAmBH,IAsBlC,OApBAqC,qBAAU,WACR,IAAMrB,EAAeN,EAASK,QAG9B,OAFAe,IAEO,WAEL,GADAF,IACIZ,EAAc,CAChB,IAAMiB,EAASjB,EAAakB,UAC5B,IAAKD,EAAQ,OACEA,EAAOK,YAEfC,SAAQ,SAACC,GACdA,EAAMC,UAGRzB,EAAakB,UAAY,SAG5B,CAACL,EAAWD,EAAUlB,EAAUoB,EAAiB3B,IAGlD,qCACE,cAACuC,EAAD,CAAOC,IAAKjC,EAAUkC,aAAW,IACjC,cAACC,EAAD,CAAQF,IAAK/B,IACb,eAACkC,EAAA,EAAD,CACEC,KAAMzC,EACN0C,aAAW,EACXC,kBAAgB,2BAChBC,mBAAiB,iCAJnB,UAME,cAACC,EAAA,EAAD,CAAaC,GAAG,2BAAhB,kDACA,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,CAAmBF,GAAG,iCAAtB,UACGnD,EAAE,yCACFsD,SAAS,mCAAGtD,EAAE,oCAGnB,cAACuD,EAAA,EAAD,UACE,cAAC,IAAD,CAAMjF,GAAG,IAAT,SACE,cAACkF,EAAA,EAAD,CAAQC,MAAM,UAAd,SAAyBzD,EAAE,6BAIjC,eAAC6C,EAAA,EAAD,CACEC,KAAMvC,EACNwC,aAAW,EACXC,kBAAgB,0BAChBC,mBAAiB,gCAJnB,UAME,cAACC,EAAA,EAAD,CAAaC,GAAG,0BAAhB,SACGnD,EAAE,qCAEL,cAACoD,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAmBF,GAAG,gCAAtB,SACGnD,EAAE,yCAGP,eAACuD,EAAA,EAAD,WACE,cAAC,IAAD,CAAMjF,GAAG,IAAT,SACE,cAACkF,EAAA,EAAD,CAAQC,MAAM,UAAd,SAAyBzD,EAAE,wBAE7B,cAAC,IAAD,CAAM1B,GAAG,iBAAT,SACE,cAACkF,EAAA,EAAD,CAAQC,MAAM,UAAd,SAAyBzD,EAAE,uCAQjCyC,EAAQ/D,IAAOU,MAAV,kXAgBLwD,EAASlE,IAAOwC,OAAV,+C,iCCxLZ,2FAiGIwC,EAAsC,qBAAXC,OAAyBC,YAAkBA,kBAKtEC,EAAwBD,cAAiB,SAAkBE,EAAOpB,GACpE,IAAIqB,EAAoBD,EAAME,WAC1BA,OAAmC,IAAtBD,EAA+B,SAAWA,EACvDE,EAAmBH,EAAMI,UACzBA,OAAiC,IAArBD,GAAsCA,EAClDE,EAAgBL,EAAMM,OACtBA,OAA2B,IAAlBD,GAAmCA,EAC5CE,EAAeP,EAAMQ,SACrBC,EAAUT,EAAMS,QAChBC,EAAYV,EAAMU,UAClBC,EAAgBX,EAAMY,UACtBC,EAAwBb,EAAMc,mBAC9BA,OAA+C,IAA1BD,EAAmC,KAAOA,EAC/DE,EAAwBf,EAAMgB,eAG9BC,GAFJF,OAAkD,IAA1BA,EAAmC,GAAKA,GAEjBL,UAC3CM,EAAiBE,YAAyBH,EAAuB,CAAC,cAClEI,EAAenB,EAAMoB,MACrBA,OAAyB,IAAjBD,GAAkCA,EAC1CE,EAAkBrB,EAAMsB,SACxBA,OAA+B,IAApBD,GAAqCA,EAChDE,EAAwBvB,EAAMwB,eAC9BA,OAA2C,IAA1BD,GAA2CA,EAC5DE,EAAiBzB,EAAM0B,QACvBA,OAA6B,IAAnBD,GAAoCA,EAC9CE,EAAwB3B,EAAM2B,sBAC9BC,EAAkB5B,EAAM6B,SACxBA,OAA+B,IAApBD,GAAqCA,EAChDE,EAAQZ,YAAyBlB,EAAO,CAAC,aAAc,YAAa,SAAU,WAAY,UAAW,YAAa,YAAa,qBAAsB,iBAAkB,QAAS,WAAY,iBAAkB,UAAW,wBAAyB,aAElP+B,EAAUjC,aAAiBkC,KAC3BC,EAAe,CACjBb,MAAOA,GAASW,EAAQX,QAAS,EACjClB,WAAYA,GAEVgC,EAAcpC,SAAa,MAC/BF,GAAkB,WACZQ,GACE8B,EAAYlF,SACdkF,EAAYlF,QAAQmF,UAKvB,CAAC/B,IACJ,IAAII,EAAWV,WAAesC,QAAQ7B,GAClC8B,EAAqB7B,EAAS8B,QAAUC,YAAa/B,EAASA,EAAS8B,OAAS,GAAI,CAAC,4BACrFE,EAAe1C,eAAkB,SAAU2C,GAE7CP,EAAYlF,QAAU0F,cAAqBD,KAC1C,IACCE,EAAYC,YAAWJ,EAAc5D,GAErCiE,EAAiBC,YAAS,CAC5BpC,UAAWqC,YAAKtC,EAAQuC,KAAMtC,EAAWuB,EAAab,OAASX,EAAQW,OAAQI,GAAkBf,EAAQwC,QAASvB,GAAWjB,EAAQiB,QAASJ,GAAYb,EAAQa,SAAUhB,GAAUG,EAAQH,OAAuB,WAAfJ,GAA2BO,EAAQyC,oBAAqBb,GAAsB5B,EAAQ0C,gBAAiBtB,GAAYpB,EAAQoB,UACjUP,SAAUA,GACTQ,GAECsB,EAAYzC,GAAiB,KAQjC,OANIL,IACFuC,EAAejC,UAAYD,GAAiB,MAC5CkC,EAAelB,sBAAwBoB,YAAKtC,EAAQ4C,aAAc1B,GAClEyB,EAAYE,KAGVjB,GAEFe,EAAaP,EAAejC,WAAcD,EAAwByC,EAAR,MAE/B,OAAvBtC,IACgB,OAAdsC,EACFA,EAAY,MAC0B,OAA7BP,EAAejC,YACxBiC,EAAejC,UAAY,QAIXd,gBAAoBkC,IAAYuB,SAAU,CAC5DC,MAAOvB,GACOnC,gBAAoBgB,EAAoBgC,YAAS,CAC/DpC,UAAWqC,YAAKtC,EAAQgD,UAAWxC,GACnCrC,IAAK+D,GACJ3B,GAA8BlB,gBAAoBsD,EAAWP,EAAgBrC,GAAWA,EAASkD,SAGlF5D,gBAAoBkC,IAAYuB,SAAU,CAC5DC,MAAOvB,GACOnC,gBAAoBsD,EAAWN,YAAS,CACtDlE,IAAK+D,GACJE,GAAiBrC,OA0GPmD,iBA/RK,SAAgBC,GAClC,MAAO,CAELZ,KAAM,CACJa,QAAS,OACTC,eAAgB,aAChB5D,WAAY,SACZ6D,SAAU,WACVC,eAAgB,OAChBxG,MAAO,OACPyG,UAAW,aACXC,UAAW,OACXC,WAAY,EACZC,cAAe,EACf,iBAAkB,CAChBC,gBAAiBT,EAAMU,QAAQC,OAAO1C,UAExC,+BAAgC,CAC9BwC,gBAAiBT,EAAMU,QAAQC,OAAO1C,UAExC,aAAc,CACZ2C,QAAS,KAKbf,UAAW,CACTM,SAAU,YAIZV,aAAc,GAGdjC,MAAO,CACL+C,WAAY,EACZC,cAAe,GAIjBlB,oBAAqB,CACnBhD,WAAY,cAIdoB,SAAU,GAGVI,QAAS,CACP+C,aAAc,aAAaC,OAAOd,EAAMU,QAAQ5C,SAChDiD,eAAgB,eAIlB1B,QAAS,CACP2B,YAAa,GACbC,aAAc,IAIhBvE,OAAQ,CACNwE,WAAYlB,EAAMmB,YAAYC,OAAO,mBAAoB,CACvDC,SAAUrB,EAAMmB,YAAYE,SAASC,WAEvC,UAAW,CACTlB,eAAgB,OAChBK,gBAAiBT,EAAMU,QAAQC,OAAOY,MAEtC,uBAAwB,CACtBd,gBAAiB,iBAMvBlB,gBAAiB,CAGf0B,aAAc,IAIhBhD,SAAU,MA6MoB,CAChCxH,KAAM,eADOsJ,CAEZ5D,I,0ICzQCqF,EAAwBtF,cAAiB,SAAkBE,EAAOpB,GACpE,IAaIyG,EAbA5E,EAAUT,EAAMS,QAChBC,EAAYV,EAAMU,UAClB4E,EAAmBtF,EAAMY,UACzBA,OAAiC,IAArB0E,EAA8B,KAAOA,EACjD/D,EAAwBvB,EAAMwB,eAC9BA,OAA2C,IAA1BD,GAA2CA,EAC5DgE,EAAkBvF,EAAMuF,gBACxBC,EAAcxF,EAAMyF,KACpBA,OAAuB,IAAhBD,EAAyB,WAAaA,EAC7C3D,EAAW7B,EAAM6B,SACjB6D,EAAe1F,EAAMqF,SACrBvD,EAAQZ,YAAyBlB,EAAO,CAAC,UAAW,YAAa,YAAa,iBAAkB,kBAAmB,OAAQ,WAAY,aAQ3I,OAJKA,EAAMsB,WACT+D,OAA4BpH,IAAjByH,EAA6BA,GAAgB,GAGtC5F,gBAAoBC,IAAU+C,YAAS,CACzDxC,QAAQ,EACRmF,KAAMA,EACNJ,SAAUA,EACVzE,UAAWA,EACXiB,SAAUA,EACVL,eAAgBA,EAChBf,QAASqC,YAAS,CAChB1B,MAAOX,EAAQW,OACdmE,GACH7E,UAAWqC,YAAKtC,EAAQuC,KAAMtC,EAAWmB,GAAYpB,EAAQoB,UAAWL,GAAkBf,EAAQwC,SAClGrE,IAAKA,GACJkD,OA8DU6B,eA1HK,SAAgBC,GAClC,MAAO,CAELZ,KAAMF,YAAS,GAAIc,EAAM+B,WAAWC,MAAOC,YAAgB,CACzDC,UAAW,GACX3B,WAAY,EACZC,cAAe,EACfH,UAAW,aACXzG,MAAO,OACPuI,SAAU,SACVC,WAAY,UACXpC,EAAMqC,YAAYC,GAAG,MAAO,CAC7BJ,UAAW,UAKb7C,QAAS,GAGTpB,SAAU,GAGVT,MAAO0B,YAAS,GAAIc,EAAM+B,WAAWQ,MAAO,CAC1CL,UAAW,YAkGiB,CAChCzL,KAAM,eADOsJ,CAEZyB,G,qFChFGgB,GAFSC,UAnCO,WAAO,IACnBnK,EAAMC,YAAe,kBAArBD,EADkB,EAEsCG,cAAxDD,EAFkB,EAElBA,kBAAmBkK,EAFD,EAECA,qBAAsBC,EAFvB,EAEuBA,WAEjD,OACE,eAACH,EAAD,WACE,cAAChM,EAAA,EAAD,CAAQE,SAAS,IAAID,KAAM6B,EAAE,UAC7B,cAACsK,EAAD,UACE,eAACC,EAAD,WACE,cAACC,EAAA,EAAD,CAAYrH,GAAG,WAAf,SAA2BnD,EAAE,8BAC7B,eAACyK,EAAA,EAAD,CACEC,QAAQ,WACRvH,GAAG,qBACHmE,MAAOpH,EACPyK,SAAU,SAACC,GACTR,EAAsBQ,EAAEC,OAAOvD,OAAoB,SALvD,UAQE,cAAC,EAAD,CAAUA,MAAM,OAAhB,0BACC+C,EAAWS,KAAI,gBAAGzL,EAAH,EAAGA,SAAU0L,EAAb,EAAaA,MAAb,OACd,cAAC,EAAD,CAAUzD,MAAOjI,EAAjB,SACG2L,YAAMD,IAAUE,YAAQF,GAAS1L,EAAW0L,GADhB,kBAKnC,cAACG,EAAA,EAAD,UAAiBlL,EAAE,qCAGvB,cAACmL,EAAD,UACE,cAACtL,EAAA,EAAD,CAAaE,eAAa,UAQdrB,IAAOE,IAAV,sIAQXuM,EAAiBzM,IAAOE,IAAV,yGAOd0L,EAAc5L,IAAOE,IAAV,8DAKX2L,EAAoB7L,YAAO0M,IAAP1M,CAAH","file":"static/js/10.d6990536.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/back.7bf7a56f.svg\";","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport back from \"../assets/back.svg\";\n\ntype Props = {\n  name: string;\n  backPath?: string;\n};\n\nexport const Header = ({ name, backPath }: Props) => {\n  return (\n    <Wrapper>\n      {backPath && (\n        <Link to={backPath}>\n          <BackButton src={back} />\n        </Link>\n      )}\n      {name}\n    </Wrapper>\n  );\n};\n\nconst BackButton = styled.img`\n  height: 20px;\n  top: 14px;\n  left: 16px;\n  position: absolute;\n`;\n\nconst Wrapper = styled.div`\n  color: #ffffff;\n  background-color: #12b188;\n  text-align: center;\n  line-height: 48px;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  flex-shrink: 0;\n`;\n","export enum mediaStreamErrorType {\n  GET_USER_MEDIA_NOT_FOUND = \"GET_USER_MEDIA_NOT_FOUND\",\n  CAMERA_ACTIVATE_ERROR = \"CAMERA_ACTIVATE_ERROR\",\n}\n\nexport const getMediaStream = async (cameraId?: string) => {\n  if (\"mediaDevices\" in navigator) {\n    try {\n      // WebRTC adapter will polyfill this\n      return navigator.mediaDevices.getUserMedia({\n        video: cameraId\n          ? { deviceId: cameraId }\n          : { facingMode: \"environment\" },\n        audio: false,\n      });\n    } catch (e) {\n      console.log(e);\n      throw new Error(mediaStreamErrorType.CAMERA_ACTIVATE_ERROR);\n    }\n  } else {\n    throw new Error(mediaStreamErrorType.GET_USER_MEDIA_NOT_FOUND);\n  }\n};\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { isIOS } from \"react-device-detect\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { useRafLoop } from \"react-use\";\nimport styled from \"styled-components\";\n\nimport { useCamera } from \"../hooks/useCamera\";\nimport { getMediaStream, mediaStreamErrorType } from \"../utils/mediaStream\";\n\ntype Props = {\n  onFrame?: (imageData: ImageData) => void;\n  suppressError?: boolean;\n};\n\nexport const MediaStream = ({ onFrame, suppressError = false }: Props) => {\n  const { t } = useTranslation(\"qr_reader\");\n  const { preferredCameraId } = useCamera();\n  const [showUnSupportErrorModal, setShowUnSupportErrorModal] = useState(false);\n  const [\n    showCameraActivationErrorModal,\n    setShowCameraActivationErrorModal,\n  ] = useState(false);\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  const [loopStop, loopStart] = useRafLoop(() => {\n    const canvasElement = canvasRef.current;\n    const videoElement = videoRef.current;\n\n    if (\n      canvasElement &&\n      videoElement &&\n      videoElement.readyState === videoElement.HAVE_ENOUGH_DATA\n    ) {\n      const canvas = canvasElement.getContext(\"2d\");\n      if (!canvas) return;\n\n      canvasElement.height = videoElement.videoHeight;\n      canvasElement.width = videoElement.videoWidth;\n      canvas.drawImage(\n        videoElement,\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      const imageData = canvas.getImageData(\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      onFrame && onFrame(imageData);\n    }\n  }, false);\n\n  const initMediaStream = useCallback(async () => {\n    const videoElement = videoRef.current;\n    if (!videoElement) return;\n\n    console.log(\"preferredCameraId\", preferredCameraId);\n\n    try {\n      const stream = await getMediaStream(\n        preferredCameraId === \"AUTO\" ? undefined : preferredCameraId\n      );\n\n      if (!stream) return;\n      videoElement.srcObject = stream;\n      videoElement.play();\n      loopStart();\n    } catch (e) {\n      switch (e.message) {\n        case mediaStreamErrorType.GET_USER_MEDIA_NOT_FOUND:\n          setShowUnSupportErrorModal(true);\n          break;\n        case mediaStreamErrorType.CAMERA_ACTIVATE_ERROR:\n          if (suppressError) return;\n          setShowCameraActivationErrorModal(true);\n          break;\n        default:\n          console.log(e);\n      }\n    }\n  }, [loopStart, preferredCameraId, suppressError]);\n\n  useEffect(() => {\n    const videoElement = videoRef.current;\n    initMediaStream();\n\n    return () => {\n      loopStop();\n      if (videoElement) {\n        const stream = videoElement.srcObject as MediaStream | null;\n        if (!stream) return;\n        const tracks = stream.getTracks();\n\n        tracks.forEach((track) => {\n          track.stop();\n        });\n\n        videoElement.srcObject = null;\n      }\n    };\n  }, [loopStart, loopStop, videoRef, initMediaStream, preferredCameraId]);\n\n  return (\n    <>\n      <Video ref={videoRef} playsInline />\n      <Canvas ref={canvasRef} />\n      <Dialog\n        open={showUnSupportErrorModal}\n        keepMounted\n        aria-labelledby=\"unsupported-device-title\"\n        aria-describedby=\"unsupported-device-description\"\n      >\n        <DialogTitle id=\"unsupported-device-title\">不支援的裝置</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"unsupported-device-description\">\n            {t(\"message.doesnt_support_get_user_media\")}\n            {isIOS && <>{t(\"message.sure_above_ios_14\")}</>}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Link to=\"/\">\n            <Button color=\"primary\">{t(\"button.back_home\")}</Button>\n          </Link>\n        </DialogActions>\n      </Dialog>\n      <Dialog\n        open={showCameraActivationErrorModal}\n        keepMounted\n        aria-labelledby=\"camera-activation-title\"\n        aria-describedby=\"camera-activation-description\"\n      >\n        <DialogTitle id=\"camera-activation-title\">\n          {t(\"dialog.cannot_open_camera.title\")}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"camera-activation-description\">\n            {t(\"dialog.cannot_open_camera.content\")}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Link to=\"/\">\n            <Button color=\"primary\">{t(\"button.back_home\")}</Button>\n          </Link>\n          <Link to=\"/cameraSetting\">\n            <Button color=\"primary\">{t(\"button.camera_setting\")}</Button>\n          </Link>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nconst Video = styled.video`\n  /* Make video to at least 100% wide and tall */\n  min-width: 100%;\n  min-height: 100%;\n\n  /* Setting width & height to auto prevents the browser from stretching or squishing the video */\n  width: auto;\n  height: auto;\n\n  /* Center the video */\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Canvas = styled.canvas`\n  display: none;\n`;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport ButtonBase from '../ButtonBase';\nimport isMuiElement from '../utils/isMuiElement';\nimport useForkRef from '../utils/useForkRef';\nimport ListContext from '../List/ListContext';\nimport * as ReactDOM from 'react-dom';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the (normally root) `component` element. May be wrapped by a `container`. */\n    root: {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      position: 'relative',\n      textDecoration: 'none',\n      width: '100%',\n      boxSizing: 'border-box',\n      textAlign: 'left',\n      paddingTop: 8,\n      paddingBottom: 8,\n      '&$focusVisible': {\n        backgroundColor: theme.palette.action.selected\n      },\n      '&$selected, &$selected:hover': {\n        backgroundColor: theme.palette.action.selected\n      },\n      '&$disabled': {\n        opacity: 0.5\n      }\n    },\n\n    /* Styles applied to the `container` element if `children` includes `ListItemSecondaryAction`. */\n    container: {\n      position: 'relative'\n    },\n\n    /* Pseudo-class applied to the `component`'s `focusVisibleClassName` prop if `button={true}`. */\n    focusVisible: {},\n\n    /* Styles applied to the `component` element if dense. */\n    dense: {\n      paddingTop: 4,\n      paddingBottom: 4\n    },\n\n    /* Styles applied to the `component` element if `alignItems=\"flex-start\"`. */\n    alignItemsFlexStart: {\n      alignItems: 'flex-start'\n    },\n\n    /* Pseudo-class applied to the inner `component` element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the inner `component` element if `divider={true}`. */\n    divider: {\n      borderBottom: \"1px solid \".concat(theme.palette.divider),\n      backgroundClip: 'padding-box'\n    },\n\n    /* Styles applied to the inner `component` element if `disableGutters={false}`. */\n    gutters: {\n      paddingLeft: 16,\n      paddingRight: 16\n    },\n\n    /* Styles applied to the inner `component` element if `button={true}`. */\n    button: {\n      transition: theme.transitions.create('background-color', {\n        duration: theme.transitions.duration.shortest\n      }),\n      '&:hover': {\n        textDecoration: 'none',\n        backgroundColor: theme.palette.action.hover,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    },\n\n    /* Styles applied to the `component` element if `children` includes `ListItemSecondaryAction`. */\n    secondaryAction: {\n      // Add some space to avoid collision as `ListItemSecondaryAction`\n      // is absolutely positioned.\n      paddingRight: 48\n    },\n\n    /* Pseudo-class applied to the root element if `selected={true}`. */\n    selected: {}\n  };\n};\nvar useEnhancedEffect = typeof window === 'undefined' ? React.useEffect : React.useLayoutEffect;\n/**\n * Uses an additional container component if `ListItemSecondaryAction` is the last child.\n */\n\nvar ListItem = /*#__PURE__*/React.forwardRef(function ListItem(props, ref) {\n  var _props$alignItems = props.alignItems,\n      alignItems = _props$alignItems === void 0 ? 'center' : _props$alignItems,\n      _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      _props$button = props.button,\n      button = _props$button === void 0 ? false : _props$button,\n      childrenProp = props.children,\n      classes = props.classes,\n      className = props.className,\n      componentProp = props.component,\n      _props$ContainerCompo = props.ContainerComponent,\n      ContainerComponent = _props$ContainerCompo === void 0 ? 'li' : _props$ContainerCompo,\n      _props$ContainerProps = props.ContainerProps;\n  _props$ContainerProps = _props$ContainerProps === void 0 ? {} : _props$ContainerProps;\n\n  var ContainerClassName = _props$ContainerProps.className,\n      ContainerProps = _objectWithoutProperties(_props$ContainerProps, [\"className\"]),\n      _props$dense = props.dense,\n      dense = _props$dense === void 0 ? false : _props$dense,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      _props$divider = props.divider,\n      divider = _props$divider === void 0 ? false : _props$divider,\n      focusVisibleClassName = props.focusVisibleClassName,\n      _props$selected = props.selected,\n      selected = _props$selected === void 0 ? false : _props$selected,\n      other = _objectWithoutProperties(props, [\"alignItems\", \"autoFocus\", \"button\", \"children\", \"classes\", \"className\", \"component\", \"ContainerComponent\", \"ContainerProps\", \"dense\", \"disabled\", \"disableGutters\", \"divider\", \"focusVisibleClassName\", \"selected\"]);\n\n  var context = React.useContext(ListContext);\n  var childContext = {\n    dense: dense || context.dense || false,\n    alignItems: alignItems\n  };\n  var listItemRef = React.useRef(null);\n  useEnhancedEffect(function () {\n    if (autoFocus) {\n      if (listItemRef.current) {\n        listItemRef.current.focus();\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.error('Material-UI: Unable to set focus to a ListItem whose component has not been rendered.');\n      }\n    }\n  }, [autoFocus]);\n  var children = React.Children.toArray(childrenProp);\n  var hasSecondaryAction = children.length && isMuiElement(children[children.length - 1], ['ListItemSecondaryAction']);\n  var handleOwnRef = React.useCallback(function (instance) {\n    // #StrictMode ready\n    listItemRef.current = ReactDOM.findDOMNode(instance);\n  }, []);\n  var handleRef = useForkRef(handleOwnRef, ref);\n\n  var componentProps = _extends({\n    className: clsx(classes.root, className, childContext.dense && classes.dense, !disableGutters && classes.gutters, divider && classes.divider, disabled && classes.disabled, button && classes.button, alignItems !== \"center\" && classes.alignItemsFlexStart, hasSecondaryAction && classes.secondaryAction, selected && classes.selected),\n    disabled: disabled\n  }, other);\n\n  var Component = componentProp || 'li';\n\n  if (button) {\n    componentProps.component = componentProp || 'div';\n    componentProps.focusVisibleClassName = clsx(classes.focusVisible, focusVisibleClassName);\n    Component = ButtonBase;\n  }\n\n  if (hasSecondaryAction) {\n    // Use div by default.\n    Component = !componentProps.component && !componentProp ? 'div' : Component; // Avoid nesting of li > li.\n\n    if (ContainerComponent === 'li') {\n      if (Component === 'li') {\n        Component = 'div';\n      } else if (componentProps.component === 'li') {\n        componentProps.component = 'div';\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(ListContext.Provider, {\n      value: childContext\n    }, /*#__PURE__*/React.createElement(ContainerComponent, _extends({\n      className: clsx(classes.container, ContainerClassName),\n      ref: handleRef\n    }, ContainerProps), /*#__PURE__*/React.createElement(Component, componentProps, children), children.pop()));\n  }\n\n  return /*#__PURE__*/React.createElement(ListContext.Provider, {\n    value: childContext\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: handleRef\n  }, componentProps), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItem.propTypes = {\n  /**\n   * Defines the `align-items` style property.\n   */\n  alignItems: PropTypes.oneOf(['flex-start', 'center']),\n\n  /**\n   * If `true`, the list item will be focused during the first mount.\n   * Focus will also be triggered if the value changes from false to true.\n   */\n  autoFocus: PropTypes.bool,\n\n  /**\n   * If `true`, the list item will be a button (using `ButtonBase`). Props intended\n   * for `ButtonBase` can then be applied to `ListItem`.\n   */\n  button: PropTypes.bool,\n\n  /**\n   * The content of the component. If a `ListItemSecondaryAction` is used it must\n   * be the last child.\n   */\n  children: chainPropTypes(PropTypes.node, function (props) {\n    var children = React.Children.toArray(props.children); // React.Children.toArray(props.children).findLastIndex(isListItemSecondaryAction)\n\n    var secondaryActionIndex = -1;\n\n    for (var i = children.length - 1; i >= 0; i -= 1) {\n      var child = children[i];\n\n      if (isMuiElement(child, ['ListItemSecondaryAction'])) {\n        secondaryActionIndex = i;\n        break;\n      }\n    } //  is ListItemSecondaryAction the last child of ListItem\n\n\n    if (secondaryActionIndex !== -1 && secondaryActionIndex !== children.length - 1) {\n      return new Error('Material-UI: You used an element after ListItemSecondaryAction. ' + 'For ListItem to detect that it has a secondary action ' + 'you must pass it as the last child to ListItem.');\n    }\n\n    return null;\n  }),\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   * By default, it's a `li` when `button` is `false` and a `div` when `button` is `true`.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * The container component used when a `ListItemSecondaryAction` is the last child.\n   */\n  ContainerComponent: PropTypes.elementType,\n\n  /**\n   * Props applied to the container component if used.\n   */\n  ContainerProps: PropTypes.object,\n\n  /**\n   * If `true`, compact vertical padding designed for keyboard and mouse input will be used.\n   */\n  dense: PropTypes.bool,\n\n  /**\n   * If `true`, the list item will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the left and right padding is removed.\n   */\n  disableGutters: PropTypes.bool,\n\n  /**\n   * If `true`, a 1px light border is added to the bottom of the list item.\n   */\n  divider: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  focusVisibleClassName: PropTypes.string,\n\n  /**\n   * Use to apply selected styling.\n   */\n  selected: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItem'\n})(ListItem);","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ListItem from '../ListItem';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.body1, _defineProperty({\n      minHeight: 48,\n      paddingTop: 6,\n      paddingBottom: 6,\n      boxSizing: 'border-box',\n      width: 'auto',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap'\n    }, theme.breakpoints.up('sm'), {\n      minHeight: 'auto'\n    })),\n    // TODO v5: remove\n\n    /* Styles applied to the root element if `disableGutters={false}`. */\n    gutters: {},\n\n    /* Styles applied to the root element if `selected={true}`. */\n    selected: {},\n\n    /* Styles applied to the root element if dense. */\n    dense: _extends({}, theme.typography.body2, {\n      minHeight: 'auto'\n    })\n  };\n};\nvar MenuItem = /*#__PURE__*/React.forwardRef(function MenuItem(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'li' : _props$component,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      ListItemClasses = props.ListItemClasses,\n      _props$role = props.role,\n      role = _props$role === void 0 ? 'menuitem' : _props$role,\n      selected = props.selected,\n      tabIndexProp = props.tabIndex,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\", \"disableGutters\", \"ListItemClasses\", \"role\", \"selected\", \"tabIndex\"]);\n\n  var tabIndex;\n\n  if (!props.disabled) {\n    tabIndex = tabIndexProp !== undefined ? tabIndexProp : -1;\n  }\n\n  return /*#__PURE__*/React.createElement(ListItem, _extends({\n    button: true,\n    role: role,\n    tabIndex: tabIndex,\n    component: component,\n    selected: selected,\n    disableGutters: disableGutters,\n    classes: _extends({\n      dense: classes.dense\n    }, ListItemClasses),\n    className: clsx(classes.root, className, selected && classes.selected, !disableGutters && classes.gutters),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? MenuItem.propTypes = {\n  /**\n   * Menu item contents.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, compact vertical padding designed for keyboard and mouse input will be used.\n   */\n  dense: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the left and right padding is removed.\n   */\n  disableGutters: PropTypes.bool,\n\n  /**\n   * `classes` prop applied to the [`ListItem`](/api/list-item/) element.\n   */\n  ListItemClasses: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  role: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  selected: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  tabIndex: PropTypes.number\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiMenuItem'\n})(MenuItem);","import {\n  FormControl,\n  FormHelperText,\n  InputLabel,\n  MenuItem,\n  Select,\n} from \"@material-ui/core\";\nimport { isEmpty, isNil } from \"ramda\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\n\nimport { Header } from \"../../components/Header\";\nimport { MediaStream } from \"../../components/MediaStream\";\nimport { useCamera } from \"../../hooks/useCamera\";\n\nconst CameraSetting = () => {\n  const { t } = useTranslation(\"camera_setting\");\n  const { preferredCameraId, setPreferredCameraId, cameraList } = useCamera();\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name={t(\"name\")} />\n      <FormWrapper>\n        <StyledFormControl>\n          <InputLabel id=\"cameraId\">{t(\"form.camera_choice.label\")}</InputLabel>\n          <Select\n            labelId=\"cameraId\"\n            id=\"demo-simple-select\"\n            value={preferredCameraId}\n            onChange={(e) => {\n              setPreferredCameraId((e.target.value as string) || \"AUTO\");\n            }}\n          >\n            <MenuItem value=\"AUTO\">自動</MenuItem>\n            {cameraList.map(({ deviceId, label }) => (\n              <MenuItem value={deviceId} key=\"deviceId\">\n                {isNil(label) || isEmpty(label) ? deviceId : label}\n              </MenuItem>\n            ))}\n          </Select>\n          <FormHelperText>{t(\"form.camera_choice.explain\")}</FormHelperText>\n        </StyledFormControl>\n      </FormWrapper>\n      <VideoContainer>\n        <MediaStream suppressError />\n      </VideoContainer>\n    </PageWrapper>\n  );\n};\n\nexport default CameraSetting;\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n`;\n\nconst VideoContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst FormWrapper = styled.div`\n  width: 100%;\n  display: flex;\n`;\n\nconst StyledFormControl = styled(FormControl)`\n  width: 100%;\n\n  &.MuiFormControl-root {\n    margin: 8px;\n  }\n`;\n"],"sourceRoot":""}